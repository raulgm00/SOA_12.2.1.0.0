<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="true" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Utileria/GestionCache/Resources/WSDLs/NMPGestionCacheWSDL"/>
            <con:binding>
                <con:name>GestionCachePTSOAP12Binding</con:name>
                <con:namespace>http://servicios.montedepiedad.com.mx/NMP/Services/GestionCache</con:namespace>
            </con:binding>
        </con:binding>
        <con:xqConfiguration>
            <con:snippetVersion>1.0</con:snippetVersion>
        </con:xqConfiguration>
    </con:coreEntry>
    <con:router errorHandler="error-af10c52.N49cf4df5.0.15e39a976f1.N7b2d">
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7f9c">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7f9a" name="StageValidacion">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f91</con2:id>
                        <con1:schema ref="Utileria/GestionCache/Resources/Schemas/NMPGestionCacheXSD"/>
                        <con1:schemaElement xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">ges:generarLlaveRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:generarLlaveRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                    <con2:assign varName="nombreCache">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78aa</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'nombreCache', 'adapter-local')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="jndi">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7844</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'jndi', 'jca://eis/Coherence/LocalDefaultNMP')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7f94" name="StageGenerarLlave">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="gcoh" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/>
                </con:context>
                <con:actions>
                    <con2:assign varName="llaves">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78b0</con1:id>
                        <con2:expr>
                            <con1:xqueryText>&lt;gc:llaves xmlns:gc="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">        
&lt;/gc:llaves></con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con1:foreach xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f8e</con2:id>
                        <con1:variable>body</con1:variable>
                        <con1:expression>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:generarLlaveRequest/ges:llaves/ges:llave</con2:xpathText>
                        </con1:expression>
                        <con1:value-variable>llave</con1:value-variable>
                        <con1:index-variable>indice</con1:index-variable>
                        <con1:total-variable>contador</con1:total-variable>
                        <con1:actions>
                            <con1:wsCallout>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f96</con2:id>
                                <con1:service ref="Utileria/GestionCache/Business Services/SOAGestionCoherenceBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                <con1:operation>generarLlave</con1:operation>
                                <con1:request>
                                    <con1:body wrapped="false">generarLlaveRequest</con1:body>
                                </con1:request>
                                <con1:response>
                                    <con1:body wrapped="false">generarLlaveResponse</con1:body>
                                </con1:response>
                                <con1:requestTransform>
                                    <con1:routing-options>
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7841</con3:id>
                                        <con1:uriExpr>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$jndi</con3:xqueryText>
                                        </con1:uriExpr>
                                    </con1:routing-options>
                                    <con1:transport-headers>
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f81</con2:id>
                                        <con1:header-set>outbound-request</con1:header-set>
                                        <con1:header value="expression" name="jca.coherence.Key">
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$llave/ges:idLlave/text()</con2:xqueryText>
                                        </con1:header>
                                        <con1:header value="expression" name="jca.coherence.CacheName">
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$nombreCache</con3:xqueryText>
                                        </con1:header>
                                    </con1:transport-headers>
                                    <con1:insert varName="llave">
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78a7</con3:id>
                                        <con1:location>
                                            <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">.</con3:xpathText>
                                        </con1:location>
                                        <con1:where>last-child</con1:where>
                                        <con1:expr>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<ges:contenido xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
  <ges:nombre>fechaCreacion</ges:nombre>
  <ges:valor>{fn:current-dateTime()}</ges:valor>                
</ges:contenido>]]></con3:xqueryText>
                                        </con1:expr>
                                    </con1:insert>
                                    <con1:assign varName="generarLlaveRequest">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f8a</con2:id>
                                        <con1:expr>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;ges:llavesXML>        
    {$llave}
&lt;/ges:llavesXML></con2:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                </con1:requestTransform>
                                <con1:responseTransform>
                                    <con1:insert varName="llaves">
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78ad</con3:id>
                                        <con1:location>
                                            <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">.</con3:xpathText>
                                        </con1:location>
                                        <con1:where>last-child</con1:where>
                                        <con1:expr>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">&lt;gc:llave xmlns:gc="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
  &lt;gc:idLlave>{$generarLlaveResponse/gcoh:Key/text()}&lt;/gc:idLlave>            
&lt;/gc:llave></con3:xqueryText>
                                        </con1:expr>
                                    </con1:insert>
                                </con1:responseTransform>
                            </con1:wsCallout>
                        </con1:actions>
                    </con1:foreach>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7f9b">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7f99" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f7e</con2:id>
                        <con1:expr>
                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap:Body xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <ges:generarLlaveResponse  xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
            <ges:respuesta>
                <ges:codigo>0</ges:codigo>
                <ges:mensaje>Llave(s) generada(s) exitosamente</ges:mensaje>
            </ges:respuesta>
            {$llaves}
        </ges:generarLlaveResponse>
    </soap:Body>]]></con3:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7ef1">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7ef0" name="StageValidacion">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7eef</con2:id>
                        <con1:schema ref="Utileria/GestionCache/Resources/Schemas/NMPGestionCacheXSD"/>
                        <con1:schemaElement xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">ges:consultarLlaveRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:consultarLlaveRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                    <con2:assign varName="nombreCache">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78a4</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'nombreCache', 'adapter-local')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="jndi">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N783e</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'jndi', 'jca://eis/Coherence/LocalDefaultNMP')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7eee" name="StageConsultarLlave">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7eec</con2:id>
                        <con1:service ref="Utileria/GestionCache/Business Services/SOAGestionCoherenceBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultarLlave</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">consultarLlaveRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">consultarLlaveResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:routing-options>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7803</con3:id>
                                <con1:uriExpr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$jndi</con3:xqueryText>
                                </con1:uriExpr>
                            </con1:routing-options>
                            <con1:transport-headers>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7eeb</con2:id>
                                <con1:header-set>outbound-request</con1:header-set>
                                <con1:header value="expression" name="jca.coherence.Key">
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/ges:consultarLlaveRequest/ges:idLlave/text()</con2:xqueryText>
                                </con1:header>
                                <con1:header value="expression" name="jca.coherence.CacheName">
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$nombreCache</con3:xqueryText>
                                </con1:header>
                            </con1:transport-headers>
                            <con1:assign varName="consultarLlaveRequest">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7eea</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;ges:GetRequest xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/></con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N789d</con3:id>
                                <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N789c">
                                    <con1:condition>
                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultarLlaveResponse/ges:llave</con3:xqueryText>
                                    </con1:condition>
                                    <con1:actions/>
                                </con1:case>
                                <con1:default>
                                    <con1:Error>
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7899</con3:id>
                                        <con1:errCode>NMP-101</con1:errCode>
                                        <con1:message>Llave no existe</con1:message>
                                    </con1:Error>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7ee9">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7ee8" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7ee7</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap:Body xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <ges:consultarLlaveResponse  xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
            <ges:llaves>
            {$consultarLlaveResponse/*}
            </ges:llaves>
        </ges:consultarLlaveResponse>
    </soap:Body>]]></con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7dc3">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7dc2" name="StageValidacion">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7dc1</con2:id>
                        <con1:schema ref="Utileria/GestionCache/Resources/Schemas/NMPGestionCacheXSD"/>
                        <con1:schemaElement xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">ges:removerLlaveRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:removerLlaveRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                    <con2:assign varName="nombreCache">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7896</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'nombreCache', 'adapter-local')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="jndi">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N783c</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'jndi', 'jca://eis/Coherence/LocalDefaultNMP')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7d19" name="StageRemoverLlave">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="gcoh" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7d18</con2:id>
                        <con1:service ref="Utileria/GestionCache/Business Services/SOAGestionCoherenceBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>removerLlave</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">removerLlaveRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">removerLlaveResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:routing-options>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N77d0</con3:id>
                                <con1:uriExpr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$jndi</con3:xqueryText>
                                </con1:uriExpr>
                            </con1:routing-options>
                            <con1:transport-headers>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7d17</con2:id>
                                <con1:header-set>outbound-request</con1:header-set>
                                <con1:header value="expression" name="jca.coherence.Key">
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/ges:removerLlaveRequest/ges:idLlave/text()</con2:xqueryText>
                                </con1:header>
                                <con1:header value="expression" name="jca.coherence.CacheName">
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$nombreCache</con3:xqueryText>
                                </con1:header>
                            </con1:transport-headers>
                            <con1:assign varName="removerLlaveRequest">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7d16</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;ges:RemoveRequest xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/></con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N788d</con3:id>
                                <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N788c">
                                    <con1:condition>
                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$removerLlaveResponse/gcoh:Count='0'</con3:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:Error>
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7889</con3:id>
                                            <con1:errCode>NMP-101</con1:errCode>
                                            <con1:message>Llave no existe</con1:message>
                                        </con1:Error>
                                    </con1:actions>
                                </con1:case>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7dbb">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7dba" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7db9</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap:Body xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <ges:removerLlaveResponse  xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
            <ges:respuesta>
                <ges:codigo>0</ges:codigo>
                <ges:mensaje>Llave elminada exitosamente</ges:mensaje>
            </ges:respuesta>
        </ges:removerLlaveResponse>
    </soap:Body>]]></con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7c96">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c95" name="StageValidacion">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c94</con2:id>
                        <con1:schema ref="Utileria/GestionCache/Resources/Schemas/NMPGestionCacheXSD"/>
                        <con1:schemaElement xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">ges:listarLlavesRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:listarLlavesRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                    <con2:assign varName="jndi">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N783a</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'jndi', 'jca://eis/Coherence/Local')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c93" name="StageListarLlaves">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c92</con2:id>
                        <con1:service ref="Utileria/GestionCache/Business Services/SOAGestionCoherenceBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>listarLlaves</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">listarLlavesRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">listarLlavesResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:routing-options>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N779d</con3:id>
                                <con1:uriExpr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$jndi</con3:xqueryText>
                                </con1:uriExpr>
                            </con1:routing-options>
                            <con1:routing-options>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7847</con3:id>
                            </con1:routing-options>
                            <con1:transport-headers>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c91</con2:id>
                                <con1:header-set>outbound-request</con1:header-set>
                                <con1:header value="expression" name="jca.coherence.CacheName">
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/ges:listarLlavesRequest/ges:nombreCache/text()</con2:xqueryText>
                                </con1:header>
                            </con1:transport-headers>
                            <con1:assign varName="removerLlaveRequest">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c90</con2:id>
                                <con1:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">&lt;ges:QueryRequest xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/></con3:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N784e</con3:id>
                                <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N784d">
                                    <con1:condition>
                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$listarLlavesResponse/ges:llavesXML</con3:xqueryText>
                                    </con1:condition>
                                    <con1:actions/>
                                </con1:case>
                                <con1:default>
                                    <con1:Error>
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N784a</con3:id>
                                        <con1:errCode>NMP-102</con1:errCode>
                                        <con1:message>Cache sin llaves</con1:message>
                                    </con1:Error>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7c8f">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c8e" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c8d</con2:id>
                        <con1:expr>
                            <con2:xsltTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="Utileria/GestionCache/Resources/Transformations/SOAListarLlavesResToNMPListarLlavesRes"/>
                                <con2:input>$listarLlavesResponse</con2:input>
                            </con2:xsltTransform>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7c0c">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c0b" name="StageValidacion">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c0a</con2:id>
                        <con1:schema ref="Utileria/GestionCache/Resources/Schemas/NMPGestionCacheXSD"/>
                        <con1:schemaElement xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">ges:depurarCacheRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ges:depurarCacheRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                    <con2:assign varName="jndi">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7837</con1:id>
                        <con2:expr>
                            <con1:xqueryText>dvm:lookup('Utileria/GestionCache/Resources/DVMs/ConfigServicioGestionCache', 'idConsumidor', $header/nmph:headerMessage/nmph:idConsumidor, 'jndi', 'jca://eis/Coherence/LocalDefaultNMP')</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c09" name="StageDepurarCache">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c08</con2:id>
                        <con1:service ref="Utileria/GestionCache/Business Services/SOAGestionCoherenceBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>depurarCache</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">depurarCacheRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">depurarCacheResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:routing-options>
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N776a</con3:id>
                                <con1:uriExpr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$jndi</con3:xqueryText>
                                </con1:uriExpr>
                            </con1:routing-options>
                            <con1:transport-headers>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c07</con2:id>
                                <con1:header-set>outbound-request</con1:header-set>
                                <con1:header value="expression" name="jca.coherence.CacheName">
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$body/ges:depurarCacheRequest/ges:nombreCache/text()</con3:xqueryText>
                                </con1:header>
                                <con1:header value="expression" name="jca.coherence.Filter">
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">'key() != ""'</con3:xqueryText>
                                </con1:header>
                            </con1:transport-headers>
                            <con1:assign varName="removerLlaveRequest">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7c06</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;ges:RemoveRequest xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCoherence"/></con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7c05">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7c04" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7bff</con3:id>
                        <con1:expr>
                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap:Body xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <ges:removerLlaveResponse  xmlns:ges="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache">
            <ges:respuesta>
                <ges:codigo>0</ges:codigo>
                <ges:mensaje>cache depurada exitosamente</ges:mensaje>
            </ges:respuesta>
        </ges:removerLlaveResponse>
    </soap:Body>]]></con3:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-af10c52.N49cf4df5.0.15e39a976f1.N7b9c">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7b9a" name="StageValidacionHeader">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con2:assign varName="operacion">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7b5f</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$inbound/ctx:service/ctx:operation</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="body_tmp">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N79fd</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:validate>
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7b96</con1:id>
                        <con2:schema ref="Common/XSD/NMPStandardHeader"/>
                        <con2:schemaElement xmlns:nmp="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader">nmp:headerMessage</con2:schemaElement>
                        <con2:varName>header</con2:varName>
                        <con2:location>
                            <con1:xpathText>./nmph:headerMessage</con1:xpathText>
                        </con2:location>
                    </con2:validate>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-af10c52.N49cf4df5.0.15e39a976f1.N7b9b">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7b99" name="StageResponse">
                <con:context>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con1:rename varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7f78</con2:id>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./nmph:headerMessage</con2:xpathText>
                        </con1:location>
                        <con1:localname>headerMessageResponse</con1:localname>
                    </con1:rename>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="error-af10c52.N49cf4df5.0.15e39a976f1.N7b2d">
            <con:stage id="_StageId-af10c52.N49cf4df5.0.15e39a976f1.N7b2c" name="StageFallos">
                <con:context>
                    <con1:userNsDecl prefix="ges" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/GestionCache"/>
                    <con1:userNsDecl prefix="nmph" namespace="http://servicios.montedepiedad.com.mx/NMP/Schema/NMPStandardHeader"/>
                </con:context>
                <con:actions>
                    <con4:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7a77</con2:id>
                        <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N7a76">
                            <con1:condition>
                                <con2:xqueryText>$operacion='generarLlave'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7a75</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$body_tmp</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>generarLlave Req key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:generarLlaveRequest/ges:llaves/ges:llave[1]/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N79c6</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$fault</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>generarLlave Fault key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:generarLlaveRequest/ges:llaves/ges:llave[1]/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N7a73">
                            <con1:condition>
                                <con2:xqueryText>$operacion='consultarLlave'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N79c9</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$body_tmp</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>consultarLlave Req key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:consultarLlaveRequest/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N79c3</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$fault</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>consultarLlave Fault key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:consultarLlaveRequest/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N7a70">
                            <con1:condition>
                                <con2:xqueryText>$operacion='listarLlaves'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N798f</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$body_tmp</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>listarLlaves Req cache</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:listarLlavesRequest/ges:nombreCache</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N798c</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$fault</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>listarLlaves Fault cache</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:listarLlavesRequest/ges:nombreCache</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N7a6d">
                            <con1:condition>
                                <con2:xqueryText>$operacion='removerLlave'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7958</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$body_tmp</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>removerLlave Req key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:removerLlaveRequest/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7952</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$fault</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>removerLlave Req key</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:removerLlaveRequest/ges:idLlave</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-af10c52.N49cf4df5.0.15e39a976f1.N7a6a">
                            <con1:condition>
                                <con2:xqueryText>$operacion='depurarCache'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N791e</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$body_tmp</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>depurarCache Req cache</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:depurarCacheRequest/ges:nombreCache</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                                <con3:report>
                                    <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N791b</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>$fault</con2:xqueryText>
                                    </con3:expr>
                                    <con3:labels>
                                        <con3:key>depurarCache Fault cache</con3:key>
                                        <con3:varName>body_tmp</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./ges:depurarCacheRequest/ges:nombreCache</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                    <con3:labels>
                                        <con3:key>idConsumidor</con3:key>
                                        <con3:varName>header</con3:varName>
                                        <con3:value>
                                            <con2:xpathText>./nmph:headerMessage/nmph:idConsumidor</con2:xpathText>
                                        </con3:value>
                                    </con3:labels>
                                </con3:report>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con3:report>
                                <con2:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78b6</con2:id>
                                <con3:expr>
                                    <con2:xqueryText>$fault</con2:xqueryText>
                                </con3:expr>
                            </con3:report>
                        </con1:default>
                    </con4:ifThenElse>
                    <con2:assign varName="body">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N7b29</con1:id>
                        <con2:expr>
                            <con1:xsltTransform>
                                <con1:resource ref="Utileria/GestionCache/Resources/Transformations/TrGestionCacheFaults"/>
                                <con1:input>$fault</con1:input>
                                <con1:param name="serviceName">
                                    <con1:path>$operacion</con1:path>
                                </con1:param>
                            </con1:xsltTransform>
                        </con2:expr>
                    </con2:assign>
                    <con1:reply isError="true">
                        <con1:id>_ActionId-af10c52.N49cf4df5.0.15e39a976f1.N78b3</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="PipelineComun">
                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7b9c</con:request>
                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7b9b</con:response>
            </con:pipeline-node>
            <con:branch-node type="operation" id="_FlowId-af10c52.N49cf4df5.0.15e39a976f1.N7fcf" name="BranchNodeGestionCache">
                <con:context/>
                <con:branch-table>
                    <con:branch name="generarLlave">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelinePairGenerarLlave">
                                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7f9c</con:request>
                                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7f9b</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="consultarLlave">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelinePairConsultarLlave">
                                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7ef1</con:request>
                                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7ee9</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="removerLlave">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelineRemoverLlave">
                                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7dc3</con:request>
                                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7dbb</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="listarLlaves">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelineListarLlaves">
                                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7c96</con:request>
                                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7c8f</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="depurarCache">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelineDepurarCache">
                                <con:request>request-af10c52.N49cf4df5.0.15e39a976f1.N7c0c</con:request>
                                <con:response>response-af10c52.N49cf4df5.0.15e39a976f1.N7c05</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow/>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>