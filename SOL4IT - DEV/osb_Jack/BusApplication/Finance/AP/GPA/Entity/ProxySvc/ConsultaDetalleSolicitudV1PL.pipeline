<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <con:wsdl ref="Finance/AP/GPA/v1/ConsultaDetalleSolicitudV1WSDL"/>
            <con:binding>
                <con:name>consultarDetalleSolicitudBPELBindingSOAP</con:name>
                <con:namespace>http://qualitas.com.mx/Solicitud/ConsultarDetalleSolicitud/</con:namespace>
            </con:binding>
        </con:binding>
        <con:xqConfiguration>
            <con:snippetVersion>1.0</con:snippetVersion>
        </con:xqConfiguration>
    </con:coreEntry>
    <con:router>
        <con:pipeline name="PipelinePairNode1_request" type="request">
            <con:stage name="ConsultaBDSolicitudes">
                <con:comment/>
                <con:context>
                    <con1:userNsDecl prefix="sol" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/SolicitudDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="coun" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/CountProyectosSolicitudDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="countsol" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/CountServiciosSolicitud" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="proy" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/ProyectoDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="ser" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/ServicioDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="v1" namespace="http://qualitas.com.mx/ConsultarDetalleSolicitud/v1/" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="source" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.16.159d5962b88.N7ffb</con2:id>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$body</con:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.11.159d536d066.N7ffd</con2:id>
                        <con1:logLevel>warning</con1:logLevel>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$body</con:xqueryText>
                        </con1:expr>
                        <con1:message>NewQuerySolicitudDetalle</con1:message>
                    </con1:log>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.18.159d5a1a70a.N7ffd</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">2>1</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.c.159d47b9c0f.N7ffa</con2:id>
                                    <con1:service ref="Finance/AP/GPA/Compat/ConsultaGPACompatPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                    <con1:operation>process</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="true">bodyIn</con1:body>
                                        <con1:header/>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="true">bodyOut</con1:body>
                                        <con1:header/>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="bodyIn">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.18.159d5a1a70a.N7ffc</con2:id>
                                            <con1:expr>
                                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$body</con:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ffb</con3:id>
                                <con2:logLevel>warning</con2:logLevel>
                                <con2:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">'ENTRANDO A NUEVO...'</con:xqueryText>
                                </con2:expr>
                                <con2:message>NUEVO_PXY</con2:message>
                            </con2:log>
                            <con1:wsCallout>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ffe</con2:id>
                                <con1:service ref="Finance/AP/GPA/Entity/ProxySvc/db/SolicitudDBPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                <con1:operation>selectByPrimaryKey</con1:operation>
                                <con1:request>
                                    <con1:body wrapped="false">solicitudInput</con1:body>
                                    <con1:header/>
                                </con1:request>
                                <con1:response>
                                    <con1:body wrapped="false">solicitudOutput</con1:body>
                                    <con1:header/>
                                </con1:response>
                                <con1:requestTransform>
                                    <con1:assign varName="plainData">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ffd</con2:id>
                                        <con1:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:concat('&lt;sol:Gpa001SolicitudPrimaryKey xmlns:sol="http://xmlns.oracle.com/pcbpel/adapter/db/top/SolicitudDB">
         &lt;sol:idSolicitud>',$source/v1:consultarDetalleSolicitudRequest/idSolicitud,'&lt;/sol:idSolicitud>
      &lt;/sol:Gpa001SolicitudPrimaryKey>')</con:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ffc</con3:id>
                                        <con2:logLevel>warning</con2:logLevel>
                                        <con2:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">'Preparando Consulta Principal'</con:xqueryText>
                                        </con2:expr>
                                        <con2:message/>
                                    </con2:log>
                                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ffb</con3:id>
                                        <con3:disabled xmlns:con3="http://www.bea.com/wli/sb/stages/config">true</con3:disabled>
                                        <con2:logLevel>warning</con2:logLevel>
                                        <con2:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$plainData</con:xqueryText>
                                        </con2:expr>
                                        <con2:message>Detalle_Sol_TXT_DATA</con2:message>
                                    </con2:log>
                                    <con1:assign varName="solicitudInput">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ffa</con2:id>
                                        <con1:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML($plainData)</con:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                    <con1:replace varName="body" contents-only="true">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ff9</con2:id>
                                        <con2:disabled xmlns:con2="http://www.bea.com/wli/sb/stages/config">true</con2:disabled>
                                        <con1:location>
                                            <con:xpathText xmlns:con="http://www.bea.com/wli/sb/stages/config">.</con:xpathText>
                                        </con1:location>
                                        <con1:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(
fn:concat('
&lt;sol:Gpa001SolicitudPrimaryKey xmlns:sol="http://xmlns.oracle.com/pcbpel/adapter/db/top/SolicitudDB">
         &lt;sol:idSolicitud>',$body/v1:consultarDetalleSolicitudRequest/idSolicitud,'&lt;/sol:idSolicitud>
      &lt;/sol:Gpa001SolicitudPrimaryKey>
')
)</con:xqueryText>
                                        </con1:expr>
                                    </con1:replace>
                                </con1:requestTransform>
                                <con1:responseTransform>
                                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ff8</con3:id>
                                        <con2:logLevel>warning</con2:logLevel>
                                        <con2:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$solicitudOutput</con:xqueryText>
                                        </con2:expr>
                                        <con2:message>CONSULTA_RESULTADO</con2:message>
                                    </con2:log>
                                    <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1f.159da9f8c9d.N7ff7</con2:id>
                                        <con1:logLevel>warning</con1:logLevel>
                                        <con1:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:concat(
'Solicitud: ',
$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud,
' ==> Longitud Solicitud=',
fn:string-length($solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud) ,
'//Test1:',fn:data($solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud),
'//Test2:',fn:data($solicitudOutput/Gpa001SolicitudCollection/Gpa001Solicitud/idSolicitud),
'//Test3:',fn:data($solicitudOutput/sol:Gpa001SolicitudCollection/Gpa001Solicitud/idSolicitud),
'//Test4:',fn:data($solicitudOutput/Gpa001SolicitudCollection/sol:Gpa001Solicitud/idSolicitud),
'//Test5:',fn:data($solicitudOutput/Gpa001SolicitudCollection/Gpa001Solicitud/sol:idSolicitud)
)</con:xqueryText>
                                        </con1:expr>
                                        <con1:message>INFO_SOLICITUD_FROM_RESPONSE</con1:message>
                                    </con1:log>
                                </con1:responseTransform>
                            </con1:wsCallout>
                            <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.11.159d536d066.N7ffc</con2:id>
                                <con1:logLevel>warning</con1:logLevel>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:concat(
'Solicitud: ',
$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud,
' ==> Longitud Solicitud=',
fn:string-length($solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud) ,
'//Test1:',fn:data($solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud),
'//Test2:',fn:data($solicitudOutput/Gpa001SolicitudCollection/Gpa001Solicitud/idSolicitud),
'//Test3:',fn:data($solicitudOutput/sol:Gpa001SolicitudCollection/Gpa001Solicitud/idSolicitud),
'//Test4:',fn:data($solicitudOutput/Gpa001SolicitudCollection/sol:Gpa001Solicitud/idSolicitud),
'//Test5:',fn:data($solicitudOutput/Gpa001SolicitudCollection/Gpa001Solicitud/sol:idSolicitud)
)</con:xqueryText>
                                </con1:expr>
                                <con1:message>INFO_SOLICITUD</con1:message>
                            </con1:log>
                            <con1:ifThenElse>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ffa</con2:id>
                                <con1:case>
                                    <con1:condition>
                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string-length($solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud) > 0</con:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:assign varName="solicitudExiste">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff9</con2:id>
                                            <con1:expr>
                                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">1</con:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:wsCallout>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff8</con2:id>
                                            <con1:service ref="Finance/AP/GPA/Entity/ProxySvc/db/CountProyectosSolicitudPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                            <con1:operation>CountProyectosSolicitudDB</con1:operation>
                                            <con1:request>
                                                <con1:body wrapped="false">countProyectosInput</con1:body>
                                                <con1:header/>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body wrapped="false">countProyectosOutput</con1:body>
                                                <con1:header/>
                                            </con1:response>
                                            <con1:requestTransform>
                                                <con1:assign varName="countProyectosInput">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff7</con2:id>
                                                    <con1:expr>
                                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;coun:CountProyectosSolicitudDBInput  xmlns:coun="http://xmlns.oracle.com/pcbpel/adapter/db/CountProyectosSolicitudDB">
         &lt;coun:pSolicitud>{$body/v1:consultarDetalleSolicitudRequest/idSolicitud}&lt;/coun:pSolicitud>
&lt;/coun:CountProyectosSolicitudDBInput></con:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:requestTransform>
                                            <con1:responseTransform/>
                                        </con1:wsCallout>
                                        <con1:wsCallout>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff6</con2:id>
                                            <con1:service ref="Finance/AP/GPA/Entity/ProxySvc/db/CountServiciosSolicitudPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                            <con1:operation>CountServiciosSolicitudDB</con1:operation>
                                            <con1:request>
                                                <con1:body wrapped="false">countSvcInput</con1:body>
                                                <con1:header/>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body wrapped="false">countSvcOutput</con1:body>
                                                <con1:header/>
                                            </con1:response>
                                            <con1:requestTransform>
                                                <con1:assign varName="countSvcInput">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff5</con2:id>
                                                    <con1:expr>
                                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;coun:CountServiciosSolicitudInput xmlns:coun="http://xmlns.oracle.com/pcbpel/adapter/db/CountServiciosSolicitud">
         &lt;coun:pSolicitud>{$body/v1:consultarDetalleSolicitudRequest/idSolicitud}&lt;/coun:pSolicitud>
&lt;/coun:CountServiciosSolicitudInput></con:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:requestTransform>
                                            <con1:responseTransform/>
                                        </con1:wsCallout>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff4</con2:id>
                                            <con1:case>
                                                <con1:condition>
                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$countProyectosOutput/coun:CountProyectosSolicitudDBOutput/coun:Nro>0</con:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="mTipoServicio">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff3</con2:id>
                                                        <con1:expr>
                                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">3</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff2</con2:id>
                                                        <con1:service ref="Finance/AP/GPA/Entity/ProxySvc/db/ProyectoDBPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                                        <con1:operation>ProyectoDBSelect</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">proyectoSOLInput</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">proyectoSOLOutput</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform>
                                                            <con1:assign varName="proyectoSOLInput">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff1</con2:id>
                                                                <con1:expr>
                                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(
fn:concat('
      &lt;proy:ProyectoDBSelect_pSolicitudInputParameters>
         &lt;proy:pSolicitud>',$source/v1:consultarDetalleSolicitudRequest/idSolicitud,'&lt;/proy:pSolicitud>
      &lt;/proy:ProyectoDBSelect_pSolicitudInputParameters>
')
)</con:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:requestTransform>
                                                        <con1:responseTransform/>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="idPrestador">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7ff0</con2:id>
                                                        <con1:expr>
                                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:idPrestador</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:case>
                                                <con1:condition>
                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$countSvcOutput/countsol:CountServiciosSolicitudOutput/countsol:Nro>0</con:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fef</con2:id>
                                                        <con1:service ref="Finance/AP/GPA/Entity/ProxySvc/db/ServicioDBPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                                        <con1:operation>ServicioDBSelect</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">servicioSOLInput</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">servicioSOLOutput</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform>
                                                            <con1:assign varName="servicioSOLInput">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fee</con2:id>
                                                                <con1:expr>
                                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(
fn:concat('
      &lt;ser:ServicioDBSelect_pSolicitudInputParameters xmlns:ser="http://xmlns.oracle.com/pcbpel/adapter/db/top/ServicioDB">
         &lt;ser:pSolicitud>',$source/v1:consultarDetalleSolicitudRequest/idSolicitud,'&lt;/ser:pSolicitud>
      &lt;/ser:ServicioDBSelect_pSolicitudInputParameters>
')
)</con:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:requestTransform>
                                                        <con1:responseTransform/>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="idPrestador">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fed</con2:id>
                                                        <con1:expr>
                                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:idPrestador</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="mTipoServicio">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fec</con2:id>
                                                        <con1:expr>
                                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">1</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:assign varName="mTipoServicio">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7feb</con2:id>
                                                    <con1:expr>
                                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">0</con:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:default>
                                        </con1:ifThenElse>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fea</con2:id>
                                            <con1:case>
                                                <con1:condition>
                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string-length($idPrestador) > 0</con:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="prestadorExiste">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe9</con2:id>
                                                        <con1:expr>
                                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">1</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe8</con2:id>
                                                        <con1:service ref="MasterData/Prestadores/ProxySvc/ObtenerPrestadorPxy" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                                                        <con1:operation>processRequest</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">prestadorInput</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">prestadorOutput</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform>
                                                            <con1:assign varName="prestadorInput">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe7</con2:id>
                                                                <con1:expr>
                                                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(
fn:concat('
      &lt;obt:process xmlns:obt="http://xmlns.oracle.com/ObtenerPrestadorApp/ObtenerPrestadorPrj/ObtenerPrestadorBPEL">
         &lt;obt:numeroPrestador>',$idPrestador,'&lt;/obt:numeroPrestador>
      &lt;/obt:process>
')
)</con:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:requestTransform>
                                                        <con1:responseTransform/>
                                                    </con1:wsCallout>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:assign varName="prestadorExiste">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe6</con2:id>
                                                    <con1:expr>
                                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">0</con:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:actions>
                                </con1:case>
                                <con1:default>
                                    <con1:assign varName="solicitudExiste">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe5</con2:id>
                                        <con1:expr>
                                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">0</con:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="PipelinePairNode1_response" type="response">
            <con:stage name="ConfigRespuesta">
                <con:comment/>
                <con:context>
                    <con1:userNsDecl prefix="sol" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/SolicitudDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="ser" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/ServicioDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="proy" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/top/ProyectoDB" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="obt" namespace="http://xmlns.oracle.com/ObtenerPrestadorApp/ObtenerPrestadorPrj/ObtenerPrestadorBPEL" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="v1" namespace="http://qualitas.com.mx/ConsultarDetalleSolicitud/v1/" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.1e.159d75c6eb3.N7ffd</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">2>1</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con:log xmlns:con="http://www.bea.com/wli/sb/stages/logging/config">
                                    <con1:id xmlns:con1="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.16.159d5962b88.N7ff7</con1:id>
                                    <con:logLevel>warning</con:logLevel>
                                    <con:expr>
                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$bodyOut</con:xqueryText>
                                    </con:expr>
                                    <con:message>LEGACY_PXY____________</con:message>
                                </con:log>
                                <con1:replace varName="body" contents-only="false">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.d.159d4971538.N7ff0</con2:id>
                                    <con1:location>
                                        <con:xpathText xmlns:con="http://www.bea.com/wli/sb/stages/config">.</con:xpathText>
                                    </con1:location>
                                    <con1:expr>
                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$bodyOut</con:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.14.159d546ad4d.N7fe4</con3:id>
                                <con2:logLevel>warning</con2:logLevel>
                                <con2:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">'NEW RESPONSE'</con:xqueryText>
                                </con2:expr>
                                <con2:message>NEW_PXY</con2:message>
                            </con2:log>
                            <con1:replace varName="body" contents-only="true">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-b320018.33d06e72.18.159d5a1a70a.N7ffb</con2:id>
                                <con1:location>
                                    <con:xpathText xmlns:con="http://www.bea.com/wli/sb/stages/config">.</con:xpathText>
                                </con1:location>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config"><![CDATA[<consultarDetalleSolicitudResponse xmlns:jca="http://xmlns.oracle.com/pcbpel/wsdl/jca/" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:ns4="http://qualitas.com.mx/comunes/objetosComunes/v1/" xmlns:ns3="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultarDetalleSolicitudApp/ConsultarDetalleSolicitudPrj/SPObtenerSolicitudDB" xmlns:ns6="http://qualitas.com.mx/Importes/v1/" xmlns:ns5="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultarDetalleSolicitudApp/ConsultarDetalleSolicitudPrj/SelImportesCCDB" xmlns:ns8="http://qualitas.com.mx/Comun/Servicio/v1/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns7="http://qualitas.com.mx/comunes/" xmlns:ns9="http://qualitas.com.mx/Pagos/CuentasContables/v1/" xmlns:ns10="http://qualitas.com.mx/Comun/Servicio/ProyectoData/v1/" xmlns:client="http://qualitas.com.mx/Solicitud/ConsultarDetalleSolicitud/" xmlns:plt="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://qualitas.com.mx/ConsultarDetalleSolicitud/v1/" xmlns="http://qualitas.com.mx/ConsultarDetalleSolicitud/v1/">
         <pagoServicios>
            <servicio>
               <ns8:idTpServicio>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:idTpServicio}</ns8:idTpServicio>
               <ns8:idPrestador>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:idPrestador}</ns8:idPrestador>
               <ns8:CentroDeCosto>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:centroCosto}</ns8:CentroDeCosto>
               <ns8:cveOficina>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:cveOficina}</ns8:cveOficina>
               <ns8:descOficina>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:descOficina}</ns8:descOficina>
               <ns8:descArea>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:descArea}</ns8:descArea>
               <ns8:respArea>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:responsableArea}</ns8:respArea>
               <ns8:servicioData>
                  <ns8:idServicio>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:responsableArea}</ns8:idServicio>
                  <ns8:descripcion>{$servicioSOLOutput/ser:Gpa015ServiciosCollection/ser:Gpa015Servicios/ser:responsableArea}</ns8:descripcion>
                  <ns8:tipoMoneda/>
               </ns8:servicioData>
               <ns8:proyecto>
                  <ns10:idProyecto>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:idProyecto}</ns10:idProyecto>
                  <ns10:descripcion>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:descProyecto}</ns10:descripcion>
                  <ns10:nombre>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:nombreProyecto}</ns10:nombre>
                  <ns10:presupuestoAprob>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:presupuestoAprobado}</ns10:presupuestoAprob>
                  <ns10:totalParcialidades>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:parcialidades}</ns10:totalParcialidades>
                  <ns10:numParcialidad>1</ns10:numParcialidad>
                  <ns10:idcondicionPago>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:idCondicionesPago}</ns10:idcondicionPago>
                  <ns10:condicionPago>{$proyectoSOLOutput/proy:Gpa013ProyectoCollection/proy:Gpa013Proyecto/proy:idCondicionesPago}</ns10:condicionPago>
                  <ns10:tipoMoneda/>
                  <ns10:complemento>0</ns10:complemento>
               </ns8:proyecto>
            </servicio>
            <Prestador>
               <numeroPrestador>{$prestadorOutput/obt:processResponse/obt:numeroPrestador}</numeroPrestador>
               <nombre>{$prestadorOutput/obt:processResponse/obt:nombrePrestador}</nombre>
               <rfc>{$prestadorOutput/obt:processResponse/obt:rfc}</rfc>
               <tipoPersona>
                  <codigo>{$prestadorOutput/obt:processResponse/obt:cveTipoPersona}</codigo>
                  <descripcion>{$prestadorOutput/obt:processResponse/obt:tipoPersona}</descripcion>
               </tipoPersona>
               <claveEntidad>{$prestadorOutput/obt:processResponse/obt:cveEntidad}</claveEntidad>
               <entidad>{$prestadorOutput/obt:processResponse/obt:entidad}</entidad>
               <nacionalidad>{$prestadorOutput/obt:processResponse/obt:nacionalidad}</nacionalidad>
            </Prestador>
            <Solicitud>
               <idSolicitud>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idSolicitud}</idSolicitud>
               <totalPagar>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:totalPagar}</totalPagar>
               <idUsuario>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idUsuario}</idUsuario>
               <estado><codigo>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:idEstadoSolicitud}</codigo></estado>
               <numEmpleado>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:nuEmpleado}</numEmpleado>
               <nomEmpleado>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:nombreEmpleado}</nomEmpleado>
               <cveOfiDestino>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:oficinaDestino}</cveOfiDestino>
               <desOfDestino>{$solicitudOutput/sol:Gpa001SolicitudCollection/sol:Gpa001Solicitud/sol:oficinaDestino}</desOfDestino>
            </Solicitud>
         </pagoServicios>
      </consultarDetalleSolicitudResponse>]]></con:xqueryText>
                                </con1:expr>
                            </con1:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="PipelinePairNode1">
                <con:request>PipelinePairNode1_request</con:request>
                <con:response>PipelinePairNode1_response</con:response>
            </con:pipeline-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>